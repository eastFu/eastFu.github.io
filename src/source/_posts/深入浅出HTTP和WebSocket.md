---
title: 深入浅出Http和WebSocket
toc: true
tags: 编程
categories:
  - 编程
  - 网络
abbrlink: 53257
date: 2018-10-12 22:46:19
---

## 关于http协议

> 超文本传输协议（英文：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议[1]。HTTP是万维网的数据通信的基础。

设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。通过HTTP或者HTTPS协议请求的资源由统一资源标识符（Uniform Resource Identifiers，URI）来标识

HTTP是一个客户端终端（用户）和服务器端（网站）请求和应答的标准（TCP）。通过使用网页浏览器、网络爬虫或者其它的工具，客户端发起一个HTTP请求到服务器上指定端口（默认端口为80）。我们称这个客户端为用户代理程序（user agent）。应答的服务器上存储着一些资源，比如HTML文件和图像。我们称这个应答服务器为源服务器（origin server）。在用户代理和源服务器中间可能存在多个“中间层”，比如代理服务器、网关或者隧道（tunnel）。

尽管TCP/IP协议是互联网上最流行的应用，HTTP协议中，并没有规定必须使用它或它支持的层。事实上，HTTP可以在任何互联网协议上，或其他网络上实现。HTTP假定其下层协议提供可靠的传输。因此，任何能够提供这种保证的协议都可以被其使用。因此也就是其在TCP/IP协议族使用TCP作为其传输层。

通常，由HTTP客户端发起一个请求，创建一个到服务器指定端口（默认是80端口）的TCP连接。HTTP服务器则在那个端口监听客户端的请求。一旦收到请求，服务器会向客户端返回一个状态，比如”HTTP/1.1 200 OK”，以及返回的内容，如请求的文件、错误消息、或者其它信息。

## http协议的弊端
* http协议是半双开工协议。半双开工协议指数据可以在客户端和服务端两个方向上传输，但是不能同时传输。它意味着在同一时刻，只有一个方向上的数据传送；
* http消息冗长而繁琐。http消息包含消息头、消息体、换行符等，通常情况下采用文本方式传送，相比于其他的二进制通讯协议，冗长而繁琐；
* 针对服务器推送的黑客攻击。 例如长时间轮询；

## 关于websocket
> websocket 是 html5 开始提供的一种浏览器和服务器间进行全双工通讯的网络技术，websocket通讯协议于2011年被IETF定为标准 RFC6455，websocket API 被W3C 定为标准。

## websocket的特点
* 单一的TCP连接，采用全双工模式通讯
* 对代理、防火墙和路由器透明
* 无头部信息、cookie和身份验证
* 无安全开销
* 通过“ping/pong” 帧保持链路激活
* 服务器可以主动传递消息给客户端，不再需要客户端轮询。